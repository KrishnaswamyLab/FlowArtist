---

title: 03c03 Smoothness


keywords: fastai
sidebar: home_sidebar



nb_path: "03c03 Smoothness.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 03c03 Smoothness.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We want our vector field to be as simple as possible. One means of achieving this is to regularize it by smoothness, to penalize it for changing the direction of the vectors too suddenly. Here, I'll code up a grid-based laplacian normalizer. It will take samples from a grid graph in the support of the points and flow, calculate the  laplacian of the grid, and compute the smoothness via
{% raw %}
$$ \frac{v^T L v}{v^T v} $$
{% endraw %}</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="anisotropic_kernel" class="doc_header"><code>anisotropic_kernel</code><a href="https://github.com/professorwug/FRED/tree/master/FRED/embed.py#L240" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>anisotropic_kernel</code>(<strong><code>D</code></strong>, <strong><code>sigma</code></strong>=<em><code>0.7</code></em>, <strong><code>alpha</code></strong>=<em><code>1</code></em>)</p>
</blockquote>
<p>Computes anisotropic kernel of given distances matrix.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>D : ndarray or sparse
sigma : float, optional
    Kernel bandwidth, by default 0.7
alpha : int, optional
    Degree of density normalization, from 0 to 1; by default 1
This is a good function.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="smoothness_of_vector_field" class="doc_header"><code>smoothness_of_vector_field</code><a href="https://github.com/professorwug/FRED/tree/master/FRED/embed.py#L259" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>smoothness_of_vector_field</code>(<strong><code>embedded_points</code></strong>, <strong><code>vector_field_function</code></strong>, <strong><code>device</code></strong>, <strong><code>use_grid</code></strong>=<em><code>True</code></em>, <strong><code>grid_width</code></strong>=<em><code>20</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

